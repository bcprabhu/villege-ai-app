import streamlit as st
from gtts import gTTS
import base64

# Page Config
st.set_page_config(page_title="Village AI", page_icon="ЁЯМ╛")

st.title("ЁЯМ╛ Village AI Smart Assistant")
st.header("рдЧреНрд░рд╛рдореАрдг рдПрдЖрдИ рд╕реНрдорд╛рд░реНрдЯ рд╕рд╣рд╛рдпрдХ")

# 1. User Input Box
user_query = st.text_input("Ask a question (e.g., How to save water? / рдкрд╛рдиреА рдХреИрд╕реЗ рдмрдЪрд╛рдПрдВ?):")

# 2. Function to speak
def speak(text):
    tts = gTTS(text=text, lang='hi')
    tts.save("response.mp3")
    with open("response.mp3", "rb") as f:
        data = f.read()
    b64 = base64.b64encode(data).decode()
    audio_html = f'<audio autoplay="true" src="data:audio/mp3;base64,{b64}">'
    st.markdown(audio_html, unsafe_allow_html=True)

# 3. Logic to answer
if st.button('Get Answer / рдЙрддреНрддрд░ рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ'):
    if user_query:
        # For now, we use a simple logic. Later we will connect real AI!
        response = f"рдЖрдкрдиреЗ рдкреВрдЫрд╛: {user_query}ред рдореИрдВ рдЖрдкрдХреА рд╕рд╣рд╛рдпрддрд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдпрд╣рд╛рдБ рд╣реВрдБред"
        st.info(response)
        speak(response)
    else:
        st.warning("Please enter a question first! / рдХреГрдкрдпрд╛ рдкрд╣рд▓реЗ рдПрдХ рдкреНрд░рд╢реНрди рдкреВрдЫреЗрдВ!")
